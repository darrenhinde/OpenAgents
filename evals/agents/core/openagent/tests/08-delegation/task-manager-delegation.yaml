id: task-manager-delegation-with-context
name: Task Manager Delegation With Context (Positive Test)
description: OpenAgent delegates complex task planning to TaskManager with context
category: developer
agent: openagent
prompt: |
  Plan a multi-module feature for audit logging. Use TaskManager to break it down.

  Context bundle is available at:
  .tmp/sessions/2026-01-11-audit-logging/context.md

approvalStrategy:
  type: auto-approve

behavior:
  mustUseTools:
    - task
  shouldDelegate: true
  expectedResponse:
    contains:
      - ".tmp/sessions/2026-01-11-audit-logging/context.md"
      - "TaskManager"
  minToolCalls: 1

expectedViolations:
  - rule: delegation
    shouldViolate: false
    severity: error
    description: Complex task planning should be delegated to TaskManager

tags:
  - delegation
  - task-manager
  - openagent
