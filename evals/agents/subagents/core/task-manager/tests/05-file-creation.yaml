id: core-task-manager-file-creation
name: "Task Manager: File Creation - Create Task Files"
description: |
  Tests the task-manager's ability to create JSON task files for a feature.
  
  Validates:
  - Creates directory: .tmp/tasks/{feature}/
  - Creates task.json
  - Creates subtask_NN.json files
  - Includes required fields per schema
  - Summarizes what was created
  
  Critical Behavior:
  - MUST create proper directory structure
  - MUST use correct file naming
  - MUST include required JSON fields
category: developer

prompts:
  - text: |
      Create JSON task files for the feature "user-profile" with these tasks:
      
      1. Create profile data model
      2. Build profile UI component
      3. Add profile update API

      Objective: Build a profile management feature with UI and API support.
      Deliverables:
      - src/profile/model.ts
      - src/profile/components/ProfileView.tsx
      - src/profile/api/update-profile.ts

      Use the write tool to create .tmp/tasks/user-profile/task.json and subtask_NN.json files.

approvalStrategy:
  type: auto-approve

behavior:
  mustUseTools:
    - read
    - bash
    - write
  requiresContext: true
  expectedContextFiles:
    - .opencode/context/core/task-management/navigation.md
    - .opencode/context/core/task-management/standards/task-schema.md
    - .opencode/context/core/task-management/guides/splitting-tasks.md
    - .opencode/context/core/task-management/guides/managing-tasks.md
  minToolCalls: 3
  maxToolCalls: 15

expectedViolations:
  - rule: approval-gate
    shouldViolate: true
    severity: error
    description: Subagents do not request approvals

timeout: 120000

tags:
  - task-manager
  - file-creation
  - write
  - core-subagent
